const a0_0x502ac7=a0_0x11b0;function a0_0x5f36(){const _0x3085aa=['908106ellOmb','Article\x20ajouté.','express','listen','12516yKoBKo','Erreur\x20récupération\x20articles','body','Article\x20modifié.','put','DELETE\x20FROM\x20article\x20WHERE\x20code\x20=\x20$1','use','status','log','error','204NHImqO','Erreur\x20modification\x20article','send','168656DlhwpE','zak','/api/articles','1427BFfReC','SELECT\x20*\x20FROM\x20article\x20WHERE\x20valide\x20=\x20false\x20ORDER\x20BY\x20date\x20DESC','/api/articles/:code/valider','5bDEGFY','UPDATE\x20article\x20SET\x20des1=$1,\x20des2=$2,\x20des3=$3,\x20unitestock=$4,\x20taxe1=$5,\x20taxe2=$6,\x20taxe3=$7,\x20date=$8\x20WHERE\x20code=$9','Erreur\x20récupération\x20des\x20articles\x20validés','params','260LPPAbQ','266844BsyAsX','Article\x20supprimé.','get','Aucun\x20article\x20trouvé.','rows','362lFceZE','14tfzVRk','Erreur\x20ajout\x20article','22tGXSFU','query','Article\x20validé.','patch','/api/articles/:code','json','rowCount','701424eBBGTs','cors','post','1504820HHmnGO','Erreur\x20validation\x20article'];a0_0x5f36=function(){return _0x3085aa;};return a0_0x5f36();}function a0_0x11b0(_0x33a88b,_0x4e5179){const _0x5f36f1=a0_0x5f36();return a0_0x11b0=function(_0x11b09f,_0x5332de){_0x11b09f=_0x11b09f-0x1f4;let _0x5e121e=_0x5f36f1[_0x11b09f];return _0x5e121e;},a0_0x11b0(_0x33a88b,_0x4e5179);}(function(_0x453cb2,_0x130ceb){const _0x5448c4=a0_0x11b0,_0x4e416c=_0x453cb2();while(!![]){try{const _0x227bf0=-parseInt(_0x5448c4(0x211))/0x1*(parseInt(_0x5448c4(0x21e))/0x2)+parseInt(_0x5448c4(0x20b))/0x3*(parseInt(_0x5448c4(0x201))/0x4)+-parseInt(_0x5448c4(0x214))/0x5*(-parseInt(_0x5448c4(0x1fd))/0x6)+parseInt(_0x5448c4(0x21f))/0x7*(-parseInt(_0x5448c4(0x20e))/0x8)+parseInt(_0x5448c4(0x1f8))/0x9+parseInt(_0x5448c4(0x1fb))/0xa*(-parseInt(_0x5448c4(0x221))/0xb)+parseInt(_0x5448c4(0x219))/0xc*(parseInt(_0x5448c4(0x218))/0xd);if(_0x227bf0===_0x130ceb)break;else _0x4e416c['push'](_0x4e416c['shift']());}catch(_0x3878bf){_0x4e416c['push'](_0x4e416c['shift']());}}}(a0_0x5f36,0x45ac8));const express=require(a0_0x502ac7(0x1ff)),cors=require(a0_0x502ac7(0x1f9)),{Pool}=require('pg'),app=express();app['use'](cors()),app[a0_0x502ac7(0x207)](express['json']());const pool=new Pool({'user':'postgres','host':'localhost','database':'postgres','password':a0_0x502ac7(0x20f),'port':0x1538});app['get'](a0_0x502ac7(0x210),async(_0x106f51,_0xbfec16)=>{const _0x1d739f=a0_0x502ac7;try{const _0x5ae12c=await pool[_0x1d739f(0x222)](_0x1d739f(0x212));_0xbfec16[_0x1d739f(0x1f6)](_0x5ae12c['rows']);}catch(_0x2d2e22){console['error'](_0x2d2e22),_0xbfec16[_0x1d739f(0x208)](0x1f4)['send'](_0x1d739f(0x202));}}),app[a0_0x502ac7(0x1fa)](a0_0x502ac7(0x210),async(_0x5f370b,_0x1c6486)=>{const _0x1b1a2b=a0_0x502ac7,{des1:_0x265762,des2:_0x3a8c8b,des3:_0x217bf2,uniteStock:_0x408e83,code:_0xae9320,taxe1:_0x48cdc6,taxe2:_0x48fa3b,taxe3:_0x58463b,date:_0x30c3be}=_0x5f370b[_0x1b1a2b(0x203)],_0x4eb003=_0x30c3be?new Date(_0x30c3be):new Date();try{await pool['query']('INSERT\x20INTO\x20article\x20(des1,\x20des2,\x20des3,\x20unitestock,\x20code,\x20taxe1,\x20taxe2,\x20taxe3,\x20date,\x20valide)\x0a\x20\x20\x20\x20\x20\x20\x20VALUES\x20($1,\x20$2,\x20$3,\x20$4,\x20$5,\x20$6,\x20$7,\x20$8,\x20$9,\x20false)',[_0x265762,_0x3a8c8b,_0x217bf2,_0x408e83,_0xae9320,_0x48cdc6,_0x48fa3b,_0x58463b,_0x4eb003]),_0x1c6486[_0x1b1a2b(0x208)](0xc9)[_0x1b1a2b(0x20d)](_0x1b1a2b(0x1fe));}catch(_0x433ddd){console[_0x1b1a2b(0x20a)](_0x433ddd),_0x1c6486[_0x1b1a2b(0x208)](0x1f4)['send'](_0x1b1a2b(0x220));}}),app[a0_0x502ac7(0x205)](a0_0x502ac7(0x1f5),async(_0x14fedd,_0x2a4922)=>{const _0x3c1f02=a0_0x502ac7,{code:_0x80dc40}=_0x14fedd[_0x3c1f02(0x217)],{des1:_0x398358,des2:_0x2b302b,des3:_0x1aaf71,uniteStock:_0x24862f,taxe1:_0x47cb24,taxe2:_0x13df6d,taxe3:_0x2907e0}=_0x14fedd[_0x3c1f02(0x203)],_0x2d2730=new Date();try{await pool['query'](_0x3c1f02(0x215),[_0x398358,_0x2b302b,_0x1aaf71,_0x24862f,_0x47cb24,_0x13df6d,_0x2907e0,_0x2d2730,_0x80dc40]),_0x2a4922[_0x3c1f02(0x208)](0xc8)[_0x3c1f02(0x20d)](_0x3c1f02(0x204));}catch(_0x417a03){console[_0x3c1f02(0x20a)](_0x417a03),_0x2a4922[_0x3c1f02(0x208)](0x1f4)[_0x3c1f02(0x20d)](_0x3c1f02(0x20c));}}),app['delete']('/api/articles/:code',async(_0x59192e,_0x1c7e9e)=>{const _0xeab289=a0_0x502ac7,{code:_0x462c64}=_0x59192e['params'];try{await pool[_0xeab289(0x222)](_0xeab289(0x206),[_0x462c64]),_0x1c7e9e[_0xeab289(0x208)](0xc8)['send'](_0xeab289(0x21a));}catch(_0x33d6d1){console[_0xeab289(0x20a)](_0x33d6d1),_0x1c7e9e[_0xeab289(0x208)](0x1f4)[_0xeab289(0x20d)]('Erreur\x20suppression\x20article');}}),app[a0_0x502ac7(0x1f4)](a0_0x502ac7(0x213),async(_0x4d4674,_0x4fb03f)=>{const _0x475015=a0_0x502ac7,{code:_0x56ff07}=_0x4d4674[_0x475015(0x217)];try{const _0x2e1707=await pool[_0x475015(0x222)]('UPDATE\x20article\x20SET\x20valide\x20=\x20true\x20WHERE\x20code\x20=\x20$1',[_0x56ff07]);if(_0x2e1707[_0x475015(0x1f7)]===0x0)return _0x4fb03f[_0x475015(0x208)](0x194)[_0x475015(0x20d)](_0x475015(0x21c));_0x4fb03f[_0x475015(0x208)](0xc8)[_0x475015(0x20d)](_0x475015(0x223));}catch(_0x470c0c){console['error'](_0x470c0c),_0x4fb03f[_0x475015(0x208)](0x1f4)['send'](_0x475015(0x1fc));}}),app[a0_0x502ac7(0x21b)]('/api/articles-valides',async(_0xbd047,_0x2e1563)=>{const _0x1da877=a0_0x502ac7;try{const _0x4ec889=await pool['query']('SELECT\x20*\x20FROM\x20article\x20WHERE\x20valide\x20=\x20true\x20ORDER\x20BY\x20date\x20DESC');_0x2e1563['json'](_0x4ec889[_0x1da877(0x21d)]);}catch(_0x615e7d){console[_0x1da877(0x20a)](_0x615e7d),_0x2e1563[_0x1da877(0x208)](0x1f4)['send'](_0x1da877(0x216));}}),app[a0_0x502ac7(0x200)](0xbb8,()=>console[a0_0x502ac7(0x209)]('\x20Serveur\x20backend\x20prêt\x20sur\x20http://localhost:3000'));